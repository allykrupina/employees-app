(this["webpackJsonpusers-app"]=this["webpackJsonpusers-app"]||[]).push([[0],{46:function(e,t,s){},47:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s(1),a=s.n(r),c=s(16),i=s.n(c),l=function(){return Object(n.jsx)("div",{className:"spinner",children:Object(n.jsxs)("div",{className:"spinner-in",children:[Object(n.jsx)("div",{className:"spinner-item"}),Object(n.jsx)("div",{className:"spinner-item"}),Object(n.jsx)("div",{className:"spinner-item"})]})})},u=function(){return Object(n.jsxs)("p",{className:"text-error",children:[Object(n.jsx)("span",{children:"Unfortunately"}),Object(n.jsx)("br",{}),"something went wrong :("]})},o=s(3),j=s(17),d=s(5),h=s(22),b=s(18),m=s(19),O=s(23),f=s(21),p=s(20),x=s.n(p),v=a.a.createContext(),y=function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(b.a)(this,s);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={ids:[],users:[],usersByDate:{},usersByAlphabet:{},status:"loader"},e.sortByAlphabet=function(t){var s=Object(h.a)(Array(26).keys()).map((function(e){return String.fromCharCode(e+97)})).reduce((function(e,s){var n=t.filter((function(e){return e.lastName.toLowerCase().charAt(0)===s}));return Object(o.a)(Object(o.a)({},e),{},Object(d.a)({},s,n))}),{});e.setState({users:t,status:"ready",usersByAlphabet:s},(function(){return e.getStorageIds()}))},e.sortByDate=function(){var t,s=e.state,n=s.ids,r=s.users,a=n.map((function(e){return r.find((function(t){return t.id===e}))})),c=Array.from(Array(12),(function(){return[]})),i=Object(j.a)(a);try{for(i.s();!(t=i.n()).done;){var l=t.value,u=new Date(l.dob),o=u.toLocaleString("default",{month:"long"}),d="".concat(u.getDate()," ").concat(o,", ").concat(u.getFullYear()," year"),h=u.getMonth()+1;l.date=d,l.currentIndex=h,l.month=o,c[h-1].push(l)}}catch(b){i.e(b)}finally{i.f()}e.setState({usersByDate:c.filter((function(e){return e.length}))})},e.updateDate=function(t){var s=e.state.ids,n=-1!==s.indexOf(t)?s.filter((function(e){return e!==t})):s.concat(t);localStorage.setItem("ids",n),e.setState({ids:n},(function(){e.sortByDate()}))},e.getUsers=function(){x()({method:"get",url:"https://yalantis-react-school-api.yalantis.com/api/task0/users"}).then((function(t){var s=t.data;s.length?e.sortByAlphabet(s):e.handleError()})).catch((function(t){return e.handleError()}))},e.getStorageIds=function(){var t=localStorage.getItem("ids");t&&e.setState({ids:t.split(",")},(function(){return e.sortByDate()}))},e.clearAll=function(){localStorage.removeItem("ids"),e.setState({ids:[],usersByDate:[]})},e.handleError=function(){return e.setState({status:"error"})},e}return Object(m.a)(s,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this.props.children;return Object(n.jsx)(v.Provider,{value:Object(o.a)({},this),children:e})}}]),s}(r.Component),N=v,g=function(e){var t=e.id,s=e.lastName,a=e.firstName,c=Object(r.useContext)(N),i=c.state,l=c.updateDate,u=i.ids;return Object(n.jsxs)("div",{className:"user",children:[Object(n.jsx)("input",{type:"checkbox",className:"user-input",onChange:function(){return l(t)},checked:u.includes(t)}),Object(n.jsxs)("p",{className:"user-name",children:[s," ",a]})]})},B=function(e){var t=e.users;return Object(n.jsx)("div",{className:"users-list",children:Object.keys(t).map((function(e){return Object(n.jsxs)("div",{className:"users-list-item",children:[Object(n.jsx)("p",{className:"users-list-letter",children:e}),t[e].length?t[e].map((function(e){return Object(n.jsx)(g,Object(o.a)({},e),e.id)})):Object(n.jsx)("p",{children:"-"})]},e)}))})},C=function(){var e=Object(r.useContext)(N),t=e.state,s=e.clearAll,a=t.usersByAlphabet,c=t.ids;return Object(n.jsxs)("div",{className:"users-container",children:[Object(n.jsxs)("div",{className:"users-container-top",children:[Object(n.jsx)("h2",{className:"sub-title",children:"Employees list"}),c.length?Object(n.jsx)("p",{className:"button-clear-all",onClick:function(){return s()},children:"Clear all"}):null]}),a&&Object(n.jsx)(B,{users:a})]})},S=function(e){var t=e.users;return Object(n.jsx)("ul",{className:"date-users",children:t.map((function(e){return Object(n.jsxs)("li",{className:"date-users-item",children:[Object(n.jsxs)("p",{className:"date-user-name",children:[e.lastName," ",e.firstName]}),Object(n.jsx)("p",{className:"date-user-birthday",children:e.date})]},e.id)}))})},A=function(e){var t=e.month;return Object(n.jsx)("div",{className:"date-list",children:t.map((function(e,t){return Object(n.jsxs)("div",{className:"date-list-item",children:[Object(n.jsx)("p",{className:"date-month",children:e[0].month}),Object(n.jsx)(S,{users:e})]},t)}))})},D=function(e){var t=Object(r.useContext)(N).state.usersByDate;return Object(n.jsxs)("div",{className:"date-container",children:[Object(n.jsx)("h2",{className:"sub-title",children:"Birthday"}),t.length?Object(n.jsx)(A,{month:t}):Object(n.jsx)("p",{className:"users-notfound",children:"No selected employees"})]})},k=function(){var e=Object(r.useContext)(N).state.status;return"loader"===e?Object(n.jsx)(l,{}):"error"===e?Object(n.jsx)(u,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(C,{}),Object(n.jsx)(D,{})]})},w=(s(46),function(){return Object(n.jsx)(y,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"title",children:"Employees App"}),Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)(k,{})})]})})}),I=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,48)).then((function(t){var s=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),r(e),a(e),c(e)}))};i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(w,{})}),document.getElementById("root")),I()}},[[47,1,2]]]);
//# sourceMappingURL=main.15dfcad1.chunk.js.map